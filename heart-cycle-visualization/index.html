<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Heart Cycle Visualization</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <h1>心動週期</h1>
        <div class="canvas-container">
            <svg id="heart-svg" viewBox="0 0 600 600" xmlns="http://www.w3.org/2000/svg">
                <!-- Definitions for gradients/filters -->
                <defs>
                    <linearGradient id="grad-deoxygenated" x1="0%" y1="0%" x2="100%" y2="0%">
                        <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#2563eb;stop-opacity:1" />
                    </linearGradient>
                    <linearGradient id="grad-oxygenated" x1="0%" y1="0%" x2="100%" y2="0%">
                        <stop offset="0%" style="stop-color:#ef4444;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#dc2626;stop-opacity:1" />
                    </linearGradient>
                </defs>

                <!-- Vessels (Background) -->
                <g id="vessels-bg">
                    <!-- Superior Vena Cava -->
                    <path id="svc" d="M 150 50 L 150 200" stroke="#93c5fd" stroke-width="30" fill="none" />
                    <!-- Inferior Vena Cava -->
                    <path id="ivc" d="M 150 550 L 150 300" stroke="#93c5fd" stroke-width="30" fill="none" />

                    <!-- Pulmonary Artery (bifurcates to left and right lungs) -->
                    <path id="pulmonary-artery" d="M 230 290 L 230 120 M 230 120 L 180 80 M 230 120 L 280 80"
                        stroke="#93c5fd" stroke-width="35" fill="none" />

                    <!-- Aorta with Arch extending

 downward -->
                    <path id="aorta" d="M 370 290 L 370 150 C 370 50 450 50 450 150 L 450 500" stroke="#fca5a5"
                        stroke-width="35" fill="none" />

                    <!-- Pulmonary Veins (4 veins horizontal) -->
                    <path id="pv-tl" d="M 320 230 L 400 230" stroke="#fca5a5" stroke-width="15" fill="none" />
                    <path id="pv-bl" d="M 320 270 L 400 270" stroke="#fca5a5" stroke-width="15" fill="none" />
                    <path id="pv-tr" d="M 550 230 L 500 230" stroke="#fca5a5" stroke-width="15" fill="none" />
                    <path id="pv-br" d="M 550 270 L 500 270" stroke="#fca5a5" stroke-width="15" fill="none" />
                </g>

                <!-- Blood Particles Container -->
                <g id="blood-particles"></g>

                <!-- Heart Chambers -->
                <g id="chambers">
                    <!-- Right Atrium -->
                    <path id="ra" class="chamber right-heart"
                        d="M 100 200 Q 80 250 100 300 L 200 300 Q 220 250 200 200 Z" fill="url(#grad-deoxygenated)"
                        stroke="#1e40af" stroke-width="2" />

                    <!-- Left Atrium -->
                    <path id="la" class="chamber left-heart"
                        d="M 400 200 Q 380 250 400 300 L 500 300 Q 520 250 500 200 Z" fill="url(#grad-oxygenated)"
                        stroke="#991b1b" stroke-width="2" />

                    <!-- Right Ventricle -->
                    <path id="rv" class="chamber right-heart"
                        d="M 100 320 Q 80 450 230 550 Q 280 450 250 320 L 250 290 L 210 290 Z"
                        fill="url(#grad-deoxygenated)" stroke="#1e40af" stroke-width="2" />

                    <!-- Left Ventricle -->
                    <path id="lv" class="chamber left-heart"
                        d="M 350 320 Q 320 450 370 550 Q 520 450 500 320 L 390 290 L 350 290 Z"
                        fill="url(#grad-oxygenated)" stroke="#991b1b" stroke-width="2" />
                </g>

                <!-- Valves -->
                <g id="valves">
                    <style>
                        .valve-leaflet {
                            fill: #f8fafc;
                            stroke: #334155;
                            stroke-width: 2;
                        }

                        .valve-annulus {
                            fill: none;
                            stroke: #cbd5e1;
                            stroke-width: 4;
                        }
                    </style>

                    <!-- Tricuspid Valve -->
                    <g id="valve-tricuspid" transform="translate(150, 310)">
                        <ellipse cx="0" cy="0" rx="25" ry="8" class="valve-annulus" />
                        <path d="M -25 0 Q -10 25 0 15 Q -15 10 -25 0" class="leaflet-left valve-leaflet" />
                        <path d="M 25 0 Q 10 25 0 15 Q 15 10 25 0" class="leaflet-right valve-leaflet" />
                    </g>

                    <!-- Pulmonary Valve -->
                    <g id="valve-pulmonary" transform="translate(230, 290)">
                        <ellipse cx="0" cy="0" rx="20" ry="6" class="valve-annulus" />
                        <path d="M -20 0 Q -10 -20 0 -12 Q -10 -8 -20 0" class="leaflet-left valve-leaflet" />
                        <path d="M 20 0 Q 10 -20 0 -12 Q 10 -8 20 0" class="leaflet-right valve-leaflet" />
                    </g>

                    <!-- Mitral Valve -->
                    <g id="valve-mitral" transform="translate(450, 310)">
                        <ellipse cx="0" cy="0" rx="25" ry="8" class="valve-annulus" />
                        <path d="M -25 0 Q -10 25 0 15 Q -15 10 -25 0" class="leaflet-left valve-leaflet" />
                        <path d="M 25 0 Q 10 25 0 15 Q 15 10 25 0" class="leaflet-right valve-leaflet" />
                    </g>

                    <!-- Aortic Valve -->
                    <g id="valve-aortic" transform="translate(370, 290)">
                        <ellipse cx="0" cy="0" rx="20" ry="6" class="valve-annulus" />
                        <path d="M -20 0 Q -10 -20 0 -12 Q -10 -8 -20 0" class="leaflet-left valve-leaflet" />
                        <path d="M 20 0 Q 10 -20 0 -12 Q 10 -8 20 0" class="leaflet-right valve-leaflet" />
                    </g>
                </g>

                <!-- Labels -->
                <g id="labels" font-family="sans-serif" font-size="14" fill="#333" text-anchor="middle">
                    <text x="150" y="250">右心房</text>
                    <text x="450" y="250">左心房</text>
                    <text x="180" y="450" fill="white">右心室</text>
                    <text x="420" y="450" fill="white">左心室</text>
                </g>
            </svg>
        </div>

        <div class="controls">
            <button id="btn-toggle">播放 / 暫停</button>
            <label>
                速度:
                <input type="range" id="slider-speed" min="0.5" max="2.0" step="0.1" value="1.0">
            </label>
        </div>

        <div class="info-panel">
            <h3>心動週期狀態</h3>
            <div id="status-display">階段: <span id="phase-name">舒張期</span></div>
            <ul>
                <li>心房: <span id="status-atria">舒張</span></li>
                <li>心室: <span id="status-ventricles">舒張</span></li>
                <li>房室瓣 (三尖瓣/二尖瓣): <span id="status-av">開啟</span></li>
                <li>半月瓣 (肺動脈瓣/主動脈瓣): <span id="status-sl">關閉</span></li>
            </ul>
        </div>
    </div>
    <script src="script.js"></script>
</body>

</html>