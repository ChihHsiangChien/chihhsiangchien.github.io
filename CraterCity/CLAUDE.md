🎮 專案名稱
中文名稱：天坑之城

英文名稱：CraterCity

🧩 遊戲簡介
《天坑之城》是一款以線性不等式為核心概念的教育型邏輯遊戲，玩家需透過選擇不等式條件填補地圖上的天坑。進階關卡可允許多次填土、拼接不規則坑洞，鼓勵策略規劃與數學推理。

📐 系統角色
1. 設計者（Level Designer）
不撰寫程式

只提供每關的「規則結構」與「可用條件池」

交由系統自動產生：

可選擇的不等式選項（含混淆）

每次填土的最大條件數、最多填土次數

目標坑洞區域（多邊形座標）

2. 系統（Game Engine / Level Compiler）
根據設計者的規則組態，自動生成完整關卡資料（含混淆選項）

檢查每次填土是否有效

計算得分與是否達標

📦 關卡資料格式（由設計者定義 → 系統補足）
json

{
  "levelId": "level-07-Lshape",
  "maxFills": 3,
  "maxInequalitiesPerFill": 4,
  "availableTerms": ["x", "y", "2x", "-x", "0.5x", "x + y", "-x + y", "x - y"],
  "allowedOperators": [">", "<", ">=", "<="],
  "targetPolygons": [
    [{"x":2,"y":2},{"x":5,"y":2},{"x":5,"y":4},{"x":2,"y":4}],
    [{"x":2,"y":4},{"x":3,"y":4},{"x":3,"y":6},{"x":2,"y":6}]
  ]
}
欄位說明：
欄位	說明
levelId	唯一關卡名稱
maxFills	最多填坑次數
maxInequalitiesPerFill	每次填坑最多可選不等式條件數
availableTerms	系統可以使用的左右不等式項（由設計者指定）
allowedOperators	比較運算子：<、>、≤、≥（由設計者指定）
targetPolygons	多個目標坑洞區域（以多邊形表示）

⚙️ 系統自動生成（實作要求）
1. 每次填土：
系統允許玩家輸入 1～maxInequalitiesPerFill 條不等式，定義一個區域。

該區域與坑洞區域進行「交集比對」並繪圖。

2. 填土評估與得分：
評估每次填土區域與 targetPolygons 的交集

分數計算建議：

+10 每單位面積填中

-5 每單位面積多填

滿分條件：完全填滿且無誤蓋

3. 可選不等式生成：

每關提供 availableTerms 和 allowedOperators 的拖曳項目，讓由玩家自己填入數字，產生不等式


每條為標準形式：Ax + By < C

🖥️ 前端互動需求
左側 UI：
顯示可選不等式availableTerms 與 allowedOperators ，玩家可拖曳terms和 operators，但自行輸入數字
點檢視可在Canvas產生紅色半透明預覽，顯示這些不等式包圍的區域
按下[確定]開始填土


右側 Canvas 地圖：
顯示：

網格坐標系

坑洞區域（紅色）

玩家填土區（半透明綠）

當前填土次數進度

控制元件：
預覽 按鈕：使用目前所選不等式進行填土區域預覽
填土 按鈕：使用目前所選不等式進行填土
重設 按鈕：清除目前不等式

下一關：當得分達標可進入下一關

🛠 技術建議
項目	建議
前端框架	Vue.js 3 + Vite
畫圖工具	Canvas API 或 SVG
不等式解析	math.js
多邊形處理	polybooljs 或使用 Grid Map 模擬交集

🧪 測試要求
每關測試項目：

填土邏輯是否正確處理多條不等式交集

是否能完整覆蓋所有坑洞

混淆條件能誘導玩家思考（但不致完全遮住）

評分正確，填太多會扣分

開發初期可用網格（10x10）代替連續空間

🔚 補充說明
設計者不必處理數學邏輯或圖形運算，僅需定義不等式類型與目標形狀

AI agent 可負責實作：

多邊形交集比對

可選條件自動生成

不等式輸入視覺化

前端 UI 行為
