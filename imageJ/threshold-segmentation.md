# 閾值分割與二值化影像處理

## 簡介
閾值分割（Thresholding）是最基本且廣泛使用的影像分割方法。本章節將介紹各種閾值分割技術及其在生物醫學影像分析中的應用。

## 基本概念

### 閾值分割原理
- 灰度值分布（Grayscale Distribution）
- 閾值選擇（Threshold Selection）
- 二值化過程（Binarization Process）
- 前景/背景分離（Foreground/Background Separation）

### 閾值類型
1. 全局閾值（Global Threshold）
   - 單一閾值
   - 適用於均勻照明
   - 簡單快速
   - 應用：明確物件分割

2. 局部閾值（Local Threshold）
   - 區域自適應
   - 處理不均勻照明
   - 計算量較大
   - 應用：變異背景分割

## 自動閾值算法

### Otsu方法
- 原理：最大類間變異
- 特點：
  - 自動雙峰分布分析
  - 全局最優閾值
  - 計算效率高
- 應用：細胞核分割、組織分類

### 其他常用算法
1. Triangle Method
   - 適用於單峰分布
   - 基於直方圖形狀
   - 應用：螢光影像分割

2. Minimum Method
   - 尋找直方圖谷值
   - 適用於雙峰分布
   - 應用：顆粒分析

3. IsoData Algorithm
   - 迭代閾值優化
   - 自動收斂
   - 應用：細胞計數

## 進階技術

### 多重閾值
- 多類別分割
- 多層次閾值
- 應用：
  - 組織分層
  - 細胞器分類
  - 強度分級

### 自適應閾值
- 動態窗口（Dynamic Window）
- 局部統計（Local Statistics）
- 應用：
  - 不均勻照明校正
  - 背景變化補償
  - 邊緣增強

## 二值化後處理

### 形態學操作
1. 基本操作
   - 膨脹（Dilation）
   - 侵蝕（Erosion）
   - 開運算（Opening）
   - 閉運算（Closing）

2. 應用效果
   - 雜訊去除
   - 邊緣平滑
   - 物件分離
   - 孔洞填充

### 連通區域分析
- 物件標記（Object Labeling）
- 大小過濾（Size Filtering）
- 形狀分析（Shape Analysis）
- 應用：
  - 細胞計數
  - 群落分析
  - 缺陷檢測

## 實作範例

### 範例 1：細胞核分割
1. 影像準備
   - DAPI染色影像
   - 背景校正
   - 對比度增強

2. 分割步驟
   - Otsu閾值分割
   - 形態學後處理
   - 物件標記

### 範例 2：組織分層
1. 前處理
   - H&E染色影像
   - 色彩分離
   - 強度標準化

2. 多重閾值分割
   - 層次閾值設定
   - 區域分類
   - 邊界優化 