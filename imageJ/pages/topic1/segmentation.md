# 影像分割技術

## 簡介
影像分割是將影像分離成不同區域的過程，對於醫學影像分析尤其重要。本章節將介紹各種分割方法及其應用。

## 閾值分割

### 手動閾值
- 使用 `Image > Adjust > Threshold`
- 調整方式：
  - 手動滑桿
  - 數值輸入
  - 即時預覽

### 自動閾值
1. 內建演算法
   - Otsu方法
   - Triangle方法
   - Huang方法
   - Li方法

2. 多重閾值
   - 雙閾值分割
   - 多層次分割
   - 區間選擇

## 邊緣基礎分割

### 邊緣檢測
1. 基本算子
   - Sobel
   - Prewitt
   - Roberts
   - Laplacian

2. 進階方法
   - Canny檢測器
   - LoG（Laplacian of Gaussian）
   - DoG（Difference of Gaussian）

### 邊緣追蹤
- 輪廓追蹤
- 邊界連接
- 缺口填補
- 雜訊過濾

## 區域基礎分割

### 區域生長
1. 種子點選擇
   - 手動選擇
   - 自動檢測
   - 多點生長

2. 生長準則
   - 灰度相似性
   - 紋理特徵
   - 空間連續性

### 分水嶺分割
- 標記選擇
- 梯度計算
- 淹沒模擬
- 過分割處理

## 機器學習分割

### Trainable Weka Segmentation
1. 特徵選擇
   - 邊緣特徵
   - 紋理特徵
   - 形態特徵

2. 訓練流程
   - 標記訓練資料
   - 選擇分類器
   - 模型訓練
   - 結果驗證

### 深度學習整合
- StarDist
- U-Net
- DeepLab
- 模型選擇建議

## 分割後處理

### 形態學處理
1. 基本操作
   - 去除小物體
   - 填補孔洞
   - 平滑邊界

2. 物件分離
   - Watershed
   - Distance Transform
   - 骨架化

### 結果分析
- 面積測量
- 形狀分析
- 數量統計
- 位置追蹤

## 實作練習

### 練習 1：基本分割
1. 使用閾值分割
2. 應用邊緣檢測
3. 結果優化

### 練習 2：進階分割
1. 區域生長實作
2. 分水嶺分割
3. 機器學習嘗試

## 常見問題解決

### Q: 分割結果不完整？
A: 調整閾值範圍，考慮使用多重方法結合，必要時進行前處理。

### Q: 過分割問題嚴重？
A: 調整分水嶺參數，使用形態學後處理，考慮合併相似區域。

### Q: 機器學習效果不佳？
A: 增加訓練資料，調整特徵選擇，優化模型參數，考慮使用資料增強。 