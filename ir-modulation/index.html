<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç´…å¤–ç·šè¨Šè™Ÿèª¿è®Šèˆ‡è§£èª¿è®Š (IR Modulation Demo)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Noto+Sans+TC:wght@400;500;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <!-- Tailwind via CDN for utility classes if needed, but we will mostly use custom CSS for specific scientific look -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'scifi-bg': '#0a0a12',
                        'scifi-panel': '#161621',
                        'scifi-accent': '#00ff9d',
                        'scifi-trace-1': '#ff0055', // Data
                        'scifi-trace-2': '#00ccff', // Carrier
                        'scifi-trace-3': '#ccff00', // Modulated
                    },
                    fontFamily: {
                        mono: ['"JetBrains Mono"', 'monospace'],
                        sans: ['"Noto Sans TC"', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .glass-panel {
                @apply bg-scifi-panel/80 backdrop-blur-md border border-white/10 rounded-xl shadow-lg;
            }
            .canvas-container {
                @apply relative w-full h-[150px] bg-black/50 rounded-lg border border-white/5 overflow-hidden shadow-inner;
            }
            .control-slider {
                @apply w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer;
            }
            .control-slider::-webkit-slider-thumb {
                @apply w-4 h-4 bg-scifi-accent rounded-full shadow-[0_0_10px_rgba(0,255,157,0.5)] appearance-none transition-all hover:scale-125;
            }
        }
    </style>
</head>

<body class="bg-scifi-bg text-gray-200 font-sans min-h-screen py-8 px-4 selection:bg-scifi-accent selection:text-black">

    <div class="max-w-4xl mx-auto space-y-8">

        <!-- Header -->
        <header class="text-center space-y-2">
            <h1
                class="text-3xl md:text-4xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-scifi-accent to-blue-500">
                ç´…å¤–ç·šèª¿è®Š (IR Modulation) äº’å‹•æ¼”ç¤º
            </h1>
            <p class="text-gray-400 max-w-2xl mx-auto">
                æ¨¡æ“¬é™æ§å™¨å¦‚ä½•å°‡ä½é »çš„ã€Œè¨Šè™Ÿã€è¼‰åœ¨ 38KHz çš„ã€Œè¼‰æ³¢ã€ä¸Šç™¼å°„å‡ºå»ã€‚<br>
                <span class="text-sm opacity-70">æ³¨æ„ï¼šç‚ºäº†è¦–è¦ºèˆ‡è½è¦ºæ¼”ç¤ºï¼Œæ­¤è™•é »ç‡å·²ç¶“éèª¿æ•´ï¼ŒéçœŸå¯¦ 38KHzã€‚</span>
            </p>
        </header>

        <!-- Main Controls -->
        <div class="glass-panel p-6 flex flex-col items-center justify-center space-y-4">
            <div id="start-overlay"
                class="absolute inset-0 bg-black/80 z-50 flex items-center justify-center rounded-xl backdrop-blur-sm">
                <button id="btn-start"
                    class="px-8 py-3 bg-scifi-accent text-black font-bold rounded-full shadow-[0_0_20px_rgba(0,255,157,0.4)] hover:shadow-[0_0_30px_rgba(0,255,157,0.6)] hover:scale-105 transition-all">
                    é»æ“Šé–‹å§‹æ¼”ç¤º (Start Demo)
                </button>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 w-full">
                <!-- Data Signal Controls -->
                <div class="space-y-4">
                    <h3
                        class="text-scifi-trace-1 font-mono font-bold uppercase tracking-wider border-b border-scifi-trace-1/30 pb-1">
                        1. è³‡æ–™è¨Šè™Ÿ (Data Signal)
                    </h3>
                    <p class="text-xs text-gray-400">é€™ä»£è¡¨äººæƒ³å‚³é€çš„è³‡è¨Š (ä¾‹å¦‚ï¼šæŒ‰ä¸‹äº† "é–‹æ©Ÿ" éµ)ã€‚</p>
                    <div class="space-y-2">
                        <label class="flex justify-between text-sm font-mono">
                            <span>Frequency</span>
                            <span id="val-data-freq">2 Hz</span>
                        </label>
                        <input type="range" id="slider-data-freq" class="control-slider" min="0.5" max="10" step="0.5"
                            value="2">
                    </div>
                </div>

                <!-- Carrier Signal Controls -->
                <div class="space-y-4">
                    <h3
                        class="text-scifi-trace-2 font-mono font-bold uppercase tracking-wider border-b border-scifi-trace-2/30 pb-1">
                        2.è¼‰æ³¢è¨Šè™Ÿ (Carrier Wave)
                    </h3>
                    <p class="text-xs text-gray-400">é€™æ˜¯ç”¨ä¾†é‹é€è³‡æ–™çš„é«˜é »ç´…å¤–ç·šé–ƒçˆè¨Šè™Ÿ (å¯¦éš›ç‚º 38KHz)ã€‚</p>
                    <div class="space-y-2">
                        <label class="flex justify-between text-sm font-mono">
                            <span>Frequency</span>
                            <span id="val-carrier-freq">400 Hz</span>
                        </label>
                        <input type="range" id="slider-carrier-freq" class="control-slider" min="100" max="1000"
                            step="50" value="400">
                    </div>
                </div>
            </div>
        </div>

        <!-- Visualizations -->
        <div class="space-y-6">

            <!-- Scope 1: Data -->
            <div class="space-y-2">
                <div class="flex justify-between items-center">
                    <h3 class="text-scifi-trace-1 font-mono font-bold">åŸå§‹è¨Šè™Ÿ (Baseband)</h3>
                    <button id="btn-audio-data"
                        class="text-xs px-3 py-1 border border-scifi-trace-1 text-scifi-trace-1 rounded hover:bg-scifi-trace-1 hover:text-black transition-colors">
                        ğŸ”ˆ è©¦è½ (Listen)
                    </button>
                </div>
                <div class="canvas-container h-[120px]">
                    <canvas id="canvas-data" class="w-full h-full"></canvas>
                </div>
            </div>

            <!-- Scope 2: Carrier -->
            <div class="space-y-2">
                <div class="flex justify-between items-center">
                    <h3 class="text-scifi-trace-2 font-mono font-bold">è¼‰æ³¢ (Carrier)</h3>
                    <button id="btn-audio-carrier"
                        class="text-xs px-3 py-1 border border-scifi-trace-2 text-scifi-trace-2 rounded hover:bg-scifi-trace-2 hover:text-black transition-colors">
                        ğŸ”ˆ è©¦è½ (Listen)
                    </button>
                </div>
                <div class="canvas-container h-[100px]">
                    <canvas id="canvas-carrier" class="w-full h-full"></canvas>
                </div>
            </div>

            <!-- Scope 3: Modulated -->
            <div class="space-y-2">
                <div class="flex justify-between items-center">
                    <h3 class="text-scifi-trace-3 font-mono font-bold px-2 py-1 bg-scifi-trace-3/10 rounded">
                        èª¿è®Šå¾Œè¨Šè™Ÿ (Modulated Output)
                    </h3>
                    <button id="btn-audio-mod"
                        class="text-xs px-3 py-1 border border-scifi-trace-3 text-scifi-trace-3 rounded hover:bg-scifi-trace-3 hover:text-black transition-colors font-bold">
                        ğŸ”ˆ è©¦è½çµæœ (Listen Result)
                    </button>
                </div>
                <div class="p-4 glass-panel border-scifi-trace-3/30 shadow-[0_0_15px_rgba(204,255,0,0.1)]">
                    <div class="canvas-container h-[180px] bg-black">
                        <canvas id="canvas-mod" class="w-full h-full"></canvas>
                    </div>
                    <p class="mt-2 text-sm text-gray-400 font-mono">
                        Logic: <span class="text-white">Output = Data Ã— Carrier</span>. <br>
                        ç•¶è³‡æ–™ç‚º 1 (High) æ™‚ï¼Œç™¼å°„è¼‰æ³¢ï¼›ç•¶è³‡æ–™ç‚º 0 (Low) æ™‚ï¼Œä¸ç™¼å°„ã€‚
                    </p>
                </div>
            </div>

            <!-- Scope 4: Demodulated (Simple Rectified/Filtered visual concept) -->
            <div class="space-y-2 opacity-80 hover:opacity-100 transition-opacity">
                <div class="flex justify-between items-center">
                    <h3 class="text-white font-mono font-bold">æ¥æ”¶ç«¯è§£èª¿ (Receiver Demodulation)</h3>
                </div>
                <div class="canvas-container h-[100px] border-dashed border-gray-600">
                    <canvas id="canvas-demod" class="w-full h-full"></canvas>
                </div>
                <p class="text-xs text-gray-500">æ¥æ”¶å™¨æ”¶åˆ°ç´…å¤–ç·šå¾Œï¼Œæœƒæ¿¾é™¤é«˜é »è¼‰æ³¢ï¼Œé‚„åŸå‡ºåŸå§‹è¨Šè™Ÿã€‚</p>
            </div>

        </div>

        <footer class="text-center text-gray-600 text-sm pb-8">
            <p>Built with Web Audio API & Canvas.</p>
        </footer>

    </div>

    <script src="script.js"></script>
</body>

</html>