<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>反應時間探究 Reaction Time Explorer</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <header class="app-header">
    <h1>反應時間探究</h1>
    <div class="header-actions">
      <button id="btn-fullscreen" class="secondary">全螢幕</button>
      <button id="btn-clear" class="secondary" title="清除目前結果（不會刪除下載檔）">清除結果</button>
      <button id="btn-export" class="primary" title="下載 CSV">匯出 CSV</button>
    </div>
  </header>

  <main class="app-main">
    <section class="panel" id="controlPanel">
      <h2>控制面板</h2>
      <div class="form-grid">
        <label>
          受試代碼
          <input id="participantId" placeholder="例如 S01" />
        </label>

        <label>
          隨機種子（可留空）
          <input id="seedInput" placeholder="auto（預設）" />
        </label>

        <label>
          條件順序
          <select id="orderSelect">
            <option value="AB">先對照再實驗（AB）</option>
            <option value="BA">先實驗再對照（BA）</option>
          </select>
        </label>

        <label>
          是否包含練習
          <select id="practiceSelect">
            <option value="on">包含（使用設定檔練習數）</option>
            <option value="off">不包含</option>
          </select>
        </label>

        <label>
          對照組（A）
          <select id="controlConfigSelect">
            <option value="ControlA.json">預設 ControlA</option>
          </select>
        </label>

        <label>
          實驗組（B）
          <select id="expConfigSelect">
            <option value="ExpB.json">預設 ExpB</option>
          </select>
        </label>
      </div>

      <div class="buttons">
        <button id="btn-start" class="primary">開始實驗</button>
        <button id="btn-pause" class="secondary" disabled>暫停</button>
        <button id="btn-resume" class="secondary" disabled>繼續</button>
      </div>

      <div class="hint">提示：建議使用橫向；點選「全螢幕」以避免誤觸系統手勢。</div>

      <div class="config-info" id="configInfo"></div>
    </section>

    <section class="panel stage-panel">
      <div id="stage" class="stage" tabindex="0" aria-label="實驗舞台（請點擊目標）">
        <div id="target" class="target" hidden></div>
        <div id="fixation" class="fixation" hidden>+</div>
        <div id="overlayMsg" class="overlay" hidden></div>
      </div>

      <div class="progress">
        <div>進度：<span id="progressText">尚未開始</span></div>
      </div>
    </section>

    <section class="panel" id="resultsPanel">
      <h2>結果</h2>
      <div id="summary"></div>
      <div class="buttons">
        <button id="btn-export-2" class="primary">匯出 CSV</button>
      </div>
      <div id="rawData" class="raw"></div>
    </section>
  </main>

  <footer class="app-footer">
    <small>計時以 performance.now()；音效使用 WebAudio；資料僅在本機，需手動匯出。</small>
  </footer>

  <script type="module" src="./app.js"></script>
</body>
</html>
