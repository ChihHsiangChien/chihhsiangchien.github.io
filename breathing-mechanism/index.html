<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>呼吸運動</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <div class="visual-side">
            <div class="visualization">
                <svg id="breathingSvg" viewBox="0 0 400 500" xmlns="http://www.w3.org/2000/svg">
                    <!-- 定義漸層與濾鏡 -->
                    <defs>
                        <linearGradient id="lungGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#ff9999;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#cc6666;stop-opacity:1" />
                        </linearGradient>

                        <!-- 呼吸道遮罩 (ClipPath) -->
                        <clipPath id="respiratoryTrackClip">
                            <rect x="192" y="10" width="16" height="130" /> <!-- Trachea -->
                            <path d="M200,140 L170,180 L180,280 L220,280 L230,180 Z" />
                            <!-- Bronchi/Lungs Area Approx -->
                            <path d="M180,130 Q120,130 100,210 Q80,290 120,310 Q170,320 180,280 Z" /> <!-- Left Lung -->
                            <path d="M220,130 Q280,130 300,210 Q320,290 280,310 Q230,320 220,280 Z" />
                            <!-- Right Lung -->
                        </clipPath>

                        <!-- 箭頭標記 -->
                        <marker id="arrowHeadDown" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto">
                            <path d="M0,0 L10,5 L0,10 L5,5 Z" fill="#3498db" />
                        </marker>
                        <marker id="arrowHeadUp" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto">
                            <path d="M0,0 L10,5 L0,10 L5,5 Z" fill="#3498db" />
                        </marker>
                    </defs>

                    <!-- 脊椎 (背景) -->
                    <rect x="190" y="80" width="20" height="350" fill="#bdc3c7" rx="5" />

                    <!-- 氣管 (Trachea) -->
                    <rect id="trachea" x="192" y="80" width="16" height="130" fill="#ecf0f1" stroke="#95a5a6"
                        stroke-width="2" />

                    <!-- 支氣管 (Bronchi) -->
                    <path d="M200,140 L170,180 M200,140 L230,180" stroke="#ecf0f1" stroke-width="12"
                        stroke-linecap="round" />

                    <!-- 肺臟 (Lungs) -->
                    <!-- 調整肺臟位置往下 (y+30)，避免超過肋骨上緣 -->
                    <g id="lungsGroup">
                        <!-- 左肺 -->
                        <path id="leftLung" d="M180,130 Q120,130 100,210 Q80,290 120,310 Q170,320 180,280 Z"
                            fill="url(#lungGradient)" opacity="0.9" />
                        <!-- 右肺 -->
                        <path id="rightLung" d="M220,130 Q280,130 300,210 Q320,290 280,310 Q230,320 220,280 Z"
                            fill="url(#lungGradient)" opacity="0.9" />
                    </g>

                    <!-- 方向指示箭頭 (Arrows) -->
                    <g id="arrowGroup" transform="translate(200, 30)">
                        <!-- 吸氣箭頭 (Down) -->
                        <path id="arrowInhale" d="M0,0 L0,40" stroke="#3498db" stroke-width="4"
                            marker-end="url(#arrowHeadDown)" opacity="0" />
                        <!-- 呼氣箭頭 (Up) -->
                        <path id="arrowExhale" d="M0,40 L0,0" stroke="#3498db" stroke-width="4"
                            marker-end="url(#arrowHeadUp)" opacity="0" />
                    </g>

                    <!-- 橫膈膜 (Diaphragm) -->
                    <!-- 往下調整以配合肺臟位置，並連接肋骨末端 (y=360) -->
                    <path id="diaphragm" d="M80,360 Q200,260 320,360" fill="none" stroke="#d35400" stroke-width="8"
                        stroke-linecap="round" />

                    <!-- 肋骨 (Ribs) -->
                    <!-- 左側肋骨群 -->
                    <g id="leftRibsGroup" stroke="#7f8c8d" stroke-width="6" fill="none" stroke-linecap="round">
                        <path class="rib-left" d="M190,120 Q100,140 80,200" />
                        <path class="rib-left" d="M190,160 Q90,190 70,260" />
                        <path class="rib-left" d="M190,200 Q85,240 65,320" />
                        <path class="rib-left" d="M190,240 Q90,290 80,360" />
                    </g>

                    <!-- 右側肋骨群 -->
                    <g id="rightRibsGroup" stroke="#7f8c8d" stroke-width="6" fill="none" stroke-linecap="round">
                        <path class="rib-right" d="M210,120 Q300,140 320,200" />
                        <path class="rib-right" d="M210,160 Q310,190 330,260" />
                        <path class="rib-right" d="M210,200 Q315,240 335,320" />
                        <path class="rib-right" d="M210,240 Q310,290 320,360" />
                    </g>

                    <!-- 胸骨 (Sternum) -->
                    <rect id="sternum" x="195" y="100" width="10" height="200" fill="#ecf0f1" stroke="#bdc3c7"
                        stroke-width="1" rx="5" />


                </svg>
            </div>
        </div>

        <div class="control-side">
            <h1>呼吸運動</h1>

            <div class="controls mode-controls">
                <span>呼吸模式:</span>
                <button id="chestBreathBtn">胸式呼吸</button>
                <button id="abdominalBreathBtn">腹式呼吸</button>
            </div>

            <div class="controls">

                <button id="playPauseBtn">播放/暫停</button>
                <label for="breathSlider">呼吸週期:</label>
                <input type="range" id="breathSlider" min="0" max="100" value="0">
            </div>

            <div class="controls">
                <label for="rateSlider">呼吸頻率 (次/分):</label>
                <input type="range" id="rateSlider" min="6" max="30" value="12">
                <span id="rateValue">12</span>
            </div>

            <span id="statusText">呼氣狀態 (Exhalation)</span>
            <div class="explanation">
                <div class="phase" id="inhaleInfo">
                    <h3>吸氣 (Inhalation)</h3>
                    <ul>
                        <li>肋骨：向上向外舉起</li>
                        <li>橫膈：收縮並下降 (變平)</li>
                        <li>胸腔體積：變大</li>
                        <li>肺內壓力：下降 (空氣流入)</li>
                    </ul>
                </div>
                <div class="phase" id="exhaleInfo">
                    <h3>呼氣 (Exhalation)</h3>
                    <ul>
                        <li>肋骨：向下向內回復</li>
                        <li>橫膈：舒張並上升 (拱起)</li>
                        <li>胸腔體積：變小</li>
                        <li>肺內壓力：上升 (空氣流出)</li>
                    </ul>
                </div>
            </div>
        </div>

        <script src="script.js"></script>
</body>

</html>