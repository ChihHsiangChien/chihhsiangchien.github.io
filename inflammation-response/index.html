<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>發炎反應視覺化 (Inflammation Response)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;700&family=Outfit:wght@300;400;600&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="app-container">
        <header>
            <h1>發炎反應機制 <span class="subtitle">Inflammation Response</span></h1>
            <p class="description">互動式探索紅、腫、熱、痛的生理機制</p>
        </header>

        <main class="main-content">
            <div class="controls-panel">
                <div class="stage-buttons">
                    <button class="stage-btn active" data-stage="normal">正常狀態 (Normal)</button>
                    <button class="stage-btn" data-stage="red">紅 (Redness)</button>
                    <button class="stage-btn" data-stage="heat">熱 (Heat)</button>
                    <button class="stage-btn" data-stage="swelling">腫 (Swelling)</button>
                    <button class="stage-btn" data-stage="pain">痛 (Pain)</button>
                </div>

                <div class="info-card">
                    <h2 id="stage-title">正常狀態</h2>
                    <p id="stage-desc">組織與血管處於恆定狀態，血流速度正常，無發炎反應。</p>
                    <div class="mechanism-box">
                        <h3>生理機制</h3>
                        <p id="mechanism-desc">--</p>
                    </div>
                </div>
            </div>

            <div class="visualization-container">
                <!-- SVG Visualization will be injected here or defined inline -->
                <svg id="inflammation-viz" viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                    <defs>
                        <filter id="glow" x="-20%" y="-20%" width="140%" height="140%">
                            <feGaussianBlur stdDeviation="3" result="blur" />
                            <feComposite in="SourceGraphic" in2="blur" operator="over" />
                        </filter>
                        <linearGradient id="vesselGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop id="vessel-stop-1" offset="0%" style="stop-color:#ff8787;stop-opacity:1" />
                            <stop id="vessel-stop-2" offset="100%" style="stop-color:#ff8787;stop-opacity:1" />
                        </linearGradient>
                        <radialGradient id="inflammationGlow" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
                            <stop offset="0%" style="stop-color:rgb(255, 50, 50);stop-opacity:0.6" />
                            <stop offset="100%" style="stop-color:rgb(255, 0, 0);stop-opacity:0" />
                        </radialGradient>
                    </defs>

                    <!-- Background Tissue -->
                    <rect x="0" y="0" width="800" height="300" fill="#2a2a35" id="tissue-bg" />

                    <!-- Tissue Cells -->
                    <g id="tissue-cells">
                        <circle cx="100" cy="100" r="15" fill="#ffe066" opacity="0.6" />
                        <circle cx="200" cy="150" r="18" fill="#ffe066" opacity="0.6" />
                        <circle cx="150" cy="50" r="12" fill="#ffe066" opacity="0.6" />
                        <circle cx="600" cy="80" r="16" fill="#ffe066" opacity="0.6" />
                        <circle cx="700" cy="180" r="14" fill="#ffe066" opacity="0.6" />
                        <circle cx="550" cy="200" r="15" fill="#ffe066" opacity="0.6" />
                        <circle cx="50" cy="200" r="12" fill="#ffe066" opacity="0.6" />
                        <circle cx="750" cy="50" r="18" fill="#ffe066" opacity="0.6" />
                    </g>

                    <!-- Nerve -->
                    <path id="nerve" d="M -20 220 Q 150 220 390 200" stroke="#ffd43b" stroke-width="4" fill="none"
                        stroke-dasharray="5,5" />
                    <circle id="nerve-ending" cx="400" cy="200" r="8" fill="#ffd43b" opacity="0.5" />

                    <!-- Blood Vessel (Bottom part) -->
                    <g id="vessel-group" transform="translate(0, 300)">
                        <!-- Top Wall -->
                        <rect id="vessel-wall-top" x="0" y="0" width="800" height="10" fill="url(#vesselGradient)" />
                        <!-- Lumen -->
                        <rect id="vessel-lumen" x="0" y="10" width="800" height="80" fill="#4a0000" />
                        <!-- Bottom Wall -->
                        <rect id="vessel-wall-bottom" x="0" y="90" width="800" height="10"
                            fill="url(#vesselGradient)" />

                        <!-- Blood Cells (Animated via JS) -->
                        <g id="blood-cells"></g>
                    </g>

                    <!-- Injury Site (Initially hidden) -->
                    <g id="injury-site" opacity="0">
                        <path d="M 380 0 L 400 50 L 420 0 Z" fill="#ced4da" /> <!-- Foreign object/Bacteria source -->
                        <!-- Pathogens (Bacteria) -->
                        <g id="pathogens">
                            <circle cx="390" cy="30" r="3" fill="#51cf66" />
                            <circle cx="410" cy="20" r="3" fill="#51cf66" />
                            <circle cx="400" cy="40" r="3" fill="#51cf66" />
                            <circle cx="385" cy="15" r="3" fill="#51cf66" />
                            <circle cx="415" cy="35" r="3" fill="#51cf66" />
                        </g>
                        <circle cx="400" cy="50" r="30" fill="url(#inflammationGlow)" />
                    </g>

                    <!-- Swelling Overlay (Initially hidden) -->
                    <path id="swelling-overlay" d="M 0 300 Q 400 300 800 300" fill="#ff6b6b" opacity="0.2" />

                    <!-- Labels -->
                    <text x="20" y="280" fill="#868e96" font-size="14">組織 (Tissue)</text>
                    <text x="20" y="350" fill="#ffc9c9" font-size="14">血管 (Blood Vessel)</text>
                    <text x="660" y="240" fill="#ffd43b" font-size="14">神經 (Nerve)</text>

                </svg>
            </div>
        </main>
    </div>
    <script src="script.js"></script>
</body>

</html>