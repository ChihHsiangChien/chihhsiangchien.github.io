<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>發炎反應視覺化 (Inflammation Response)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;700&family=Outfit:wght@300;400;600&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="app-container">
        <header>
            <h1>發炎反應機制 <span class="subtitle">Inflammation Response</span></h1>
            <p class="description">互動式探索紅、腫、熱、痛的生理機制</p>
        </header>

        <main class="main-content">
            <div class="controls-panel">
                <div class="stage-buttons">
                    <button class="stage-btn toggle-btn" data-effect="red">紅 (Redness)</button>
                    <button class="stage-btn toggle-btn" data-effect="heat">熱 (Heat)</button>
                    <button class="stage-btn toggle-btn" data-effect="swelling">腫 (Swelling)</button>
                    <button class="stage-btn toggle-btn" data-effect="pain">痛 (Pain)</button>
                    <button class="stage-btn reset-btn" id="reset-btn">重置 (Reset)</button>
                </div>

                <div class="info-card">
                    <h2 id="stage-title">正常狀態</h2>
                    <p id="stage-desc">組織與血管處於恆定狀態，血流速度正常，無發炎反應。</p>
                    <div class="mechanism-box">
                        <h3>生理機制</h3>
                        <p id="mechanism-desc">--</p>
                    </div>
                </div>
            </div>

            <div class="visualization-container">
                <!-- SVG Visualization will be injected here or defined inline -->
                <svg id="inflammation-viz" viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
                    <defs>
                        <filter id="glow" x="-20%" y="-20%" width="140%" height="140%">
                            <feGaussianBlur stdDeviation="3" result="blur" />
                            <feComposite in="SourceGraphic" in2="blur" operator="over" />
                        </filter>
                        <linearGradient id="vesselGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop id="vessel-stop-1" offset="0%" style="stop-color:#ff8787;stop-opacity:1" />
                            <stop id="vessel-stop-2" offset="100%" style="stop-color:#ff8787;stop-opacity:1" />
                        </linearGradient>
                        <radialGradient id="inflammationGlow" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
                            <stop offset="0%" style="stop-color:rgb(255, 50, 50);stop-opacity:0.6" />
                            <stop offset="100%" style="stop-color:rgb(255, 0, 0);stop-opacity:0" />
                        </radialGradient>
                        <pattern id="skinPattern" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse">
                            <rect x="0" y="0" width="20" height="20" fill="#e9ecef" stroke="#dee2e6" stroke-width="1" />
                        </pattern>
                    </defs>

                    <!-- Skin Surface (Epidermis) -->
                    <path id="skin-surface" d="M 0 50 L 800 50" stroke="#adb5bd" stroke-width="2" fill="none" />

                    <!-- Epidermis Cells (Group that moves with skin surface) -->
                    <g id="epidermis-group">
                        <path id="skin-layer-fill" d="M 0 0 L 800 0 L 800 50 L 0 50 Z" fill="url(#skinPattern)"
                            opacity="0.8" />
                    </g>

                    <!-- Background Tissue (Path for animation) -->
                    <path id="tissue-bg" d="M 0 50 L 800 50 L 800 300 L 0 300 Z" fill="#2a2a35" />

                    <!-- Tissue Cells (Subcutaneous) -->
                    <g id="tissue-cells" opacity="0.6">
                        <!-- Row 1 -->
                        <g transform="translate(50, 80)">
                            <circle r="22" fill="#ffe066" />
                            <circle r="8" fill="#fcc419" />
                        </g>
                        <g transform="translate(120, 100)">
                            <circle r="24" fill="#ffe066" />
                            <circle r="9" fill="#fcc419" />
                        </g>
                        <g transform="translate(200, 70)">
                            <circle r="20" fill="#ffe066" />
                            <circle r="7" fill="#fcc419" />
                        </g>
                        <g transform="translate(280, 110)">
                            <circle r="25" fill="#ffe066" />
                            <circle r="9" fill="#fcc419" />
                        </g>
                        <g transform="translate(350, 80)">
                            <circle r="22" fill="#ffe066" />
                            <circle r="8" fill="#fcc419" />
                        </g>
                        <g transform="translate(450, 90)">
                            <circle r="23" fill="#ffe066" />
                            <circle r="8" fill="#fcc419" />
                        </g>
                        <g transform="translate(520, 70)">
                            <circle r="21" fill="#ffe066" />
                            <circle r="7" fill="#fcc419" />
                        </g>
                        <g transform="translate(600, 110)">
                            <circle r="24" fill="#ffe066" />
                            <circle r="9" fill="#fcc419" />
                        </g>
                        <g transform="translate(680, 80)">
                            <circle r="22" fill="#ffe066" />
                            <circle r="8" fill="#fcc419" />
                        </g>
                        <g transform="translate(750, 100)">
                            <circle r="25" fill="#ffe066" />
                            <circle r="9" fill="#fcc419" />
                        </g>

                        <!-- Row 2 -->
                        <g transform="translate(80, 170)">
                            <circle r="23" fill="#ffe066" />
                            <circle r="8" fill="#fcc419" />
                        </g>
                        <g transform="translate(160, 150)">
                            <circle r="21" fill="#ffe066" />
                            <circle r="7" fill="#fcc419" />
                        </g>
                        <g transform="translate(240, 180)">
                            <circle r="24" fill="#ffe066" />
                            <circle r="9" fill="#fcc419" />
                        </g>
                        <g transform="translate(320, 140)">
                            <circle r="22" fill="#ffe066" />
                            <circle r="8" fill="#fcc419" />
                        </g>
                        <g transform="translate(480, 170)">
                            <circle r="23" fill="#ffe066" />
                            <circle r="8" fill="#fcc419" />
                        </g>
                        <g transform="translate(560, 150)">
                            <circle r="21" fill="#ffe066" />
                            <circle r="7" fill="#fcc419" />
                        </g>
                        <g transform="translate(640, 180)">
                            <circle r="24" fill="#ffe066" />
                            <circle r="9" fill="#fcc419" />
                        </g>
                        <g transform="translate(720, 160)">
                            <circle r="22" fill="#ffe066" />
                            <circle r="8" fill="#fcc419" />
                        </g>

                        <!-- Row 3 -->
                        <g transform="translate(40, 240)">
                            <circle r="22" fill="#ffe066" />
                            <circle r="8" fill="#fcc419" />
                        </g>
                        <g transform="translate(130, 220)">
                            <circle r="24" fill="#ffe066" />
                            <circle r="9" fill="#fcc419" />
                        </g>
                        <g transform="translate(220, 250)">
                            <circle r="21" fill="#ffe066" />
                            <circle r="7" fill="#fcc419" />
                        </g>
                        <g transform="translate(300, 230)">
                            <circle r="23" fill="#ffe066" />
                            <circle r="8" fill="#fcc419" />
                        </g>
                        <g transform="translate(500, 240)">
                            <circle r="22" fill="#ffe066" />
                            <circle r="8" fill="#fcc419" />
                        </g>
                        <g transform="translate(590, 220)">
                            <circle r="24" fill="#ffe066" />
                            <circle r="9" fill="#fcc419" />
                        </g>
                        <g transform="translate(670, 250)">
                            <circle r="21" fill="#ffe066" />
                            <circle r="7" fill="#fcc419" />
                        </g>
                        <g transform="translate(760, 230)">
                            <circle r="23" fill="#ffe066" />
                            <circle r="8" fill="#fcc419" />
                        </g>
                    </g>

                    <!-- Nerve -->
                    <path id="nerve" d="M -20 220 Q 150 220 390 200" stroke="#ffd43b" stroke-width="4" fill="none"
                        stroke-dasharray="5,5" />
                    <circle id="nerve-ending" cx="400" cy="200" r="8" fill="#ffd43b" opacity="0.5" />

                    <!-- Blood Vessel (Bottom part) -->
                    <g id="vessel-group" transform="translate(0, 300)">
                        <!-- Top Wall -->
                        <rect id="vessel-wall-top" x="0" y="0" width="800" height="10" fill="url(#vesselGradient)" />
                        <!-- Lumen -->
                        <rect id="vessel-lumen" x="0" y="10" width="800" height="80" fill="#4a0000" />
                        <!-- Bottom Wall -->
                        <rect id="vessel-wall-bottom" x="0" y="90" width="800" height="10"
                            fill="url(#vesselGradient)" />

                        <!-- Blood Cells (Animated via JS) -->
                        <g id="blood-cells"></g>
                    </g>

                    <!-- Injury Site (Initially hidden) -->
                    <g id="injury-site" opacity="0">
                        <!-- Nail/Sharp Object penetrating from top -->
                        <path d="M 395 -20 L 405 -20 L 400 80 Z" fill="#868e96" stroke="#343a40" stroke-width="1" />
                        <!-- Pathogens (Bacteria) -->
                        <g id="pathogens">
                            <circle cx="390" cy="60" r="3" fill="#51cf66" />
                            <circle cx="410" cy="70" r="3" fill="#51cf66" />
                            <circle cx="400" cy="90" r="3" fill="#51cf66" />
                            <circle cx="385" cy="75" r="3" fill="#51cf66" />
                            <circle cx="415" cy="85" r="3" fill="#51cf66" />
                        </g>
                        <circle cx="400" cy="80" r="30" fill="url(#inflammationGlow)" />
                    </g>

                    <!-- Swelling Overlay (Initially hidden) -->
                    <path id="swelling-overlay" d="M 0 50 Q 400 50 800 50 L 800 300 L 0 300 Z" fill="#ff6b6b"
                        opacity="0" />

                    <!-- Labels -->
                    <text x="20" y="280" fill="#868e96" font-size="14">組織 (Tissue)</text>
                    <text x="20" y="350" fill="#ffc9c9" font-size="14">血管 (Blood Vessel)</text>
                    <text x="420" y="210" fill="#ffd43b" font-size="14">神經 (Nerve)</text>

                </svg>
            </div>
        </main>
    </div>
    <script src="script.js"></script>
</body>

</html>